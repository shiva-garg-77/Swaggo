# ðŸ”§ Nginx WebSocket Proxy Parameters Configuration  
# WebSocket-specific proxy settings for Socket.IO and real-time features

# Include standard proxy parameters
include /etc/nginx/proxy_params.conf;

# WebSocket specific headers
proxy_set_header Upgrade $http_upgrade;
proxy_set_header Connection "upgrade";

# WebSocket timeouts (longer for persistent connections)
proxy_connect_timeout 60s;
proxy_send_timeout 300s;
proxy_read_timeout 300s;

# Buffering disabled for real-time communication
proxy_buffering off;
proxy_cache off;

# Keep connection alive
proxy_http_version 1.1;

# Additional WebSocket headers
proxy_set_header Sec-WebSocket-Extensions $http_sec_websocket_extensions;
proxy_set_header Sec-WebSocket-Key $http_sec_websocket_key;
proxy_set_header Sec-WebSocket-Protocol $http_sec_websocket_protocol;
proxy_set_header Sec-WebSocket-Version $http_sec_websocket_version;

# Socket.IO specific settings
proxy_set_header X-Socket-IO-Version "4.0";

# Error handling for WebSocket connections
proxy_intercept_errors off;